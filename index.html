<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movie Streak</title>
  <link rel="icon" type="image/png" href="logos.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
    
  <div class="app-container">
    <header class="header-container">
      <h1>Movie Streak</h1>
      <i id="settingsToggle" class="fas fa-cog settings-toggle"></i>
    </header>
    
    <div id="movieOfTheDay" class="movie-of-the-day">
      <img id="motdPoster" src="" alt="Movie of the Day Poster">
      <div class="movie-of-the-day-info">
        <h3 id="motdTitle"></h3>
        <p id="motdSubtitle">Featured daily to help you discover new films!</p>
        <button id="addMotdBtn" onclick="addMovieOfTheDay()">Add to My List</button>
      </div>
    </div>
    
    <ul id="movieList" class="movie-grid"></ul>
  </div>

  <div class="input-section">
      <div class="input-wrapper">
        <input type="text" id="movieName" placeholder="Search for a movie...">
        <i class="fas fa-plus-circle submit-btn-icon" onclick="submitMovie()"></i>
        <ul id="suggestionsList" class="suggestions-list"></ul>
      </div>
  </div>

  <img id="profileIcon" class="profile-icon" src="" alt="Profile Icon" style="display: none;">
  <i id="discoveryGameBtn" class="fas fa-tv discovery-game-btn" onclick="startDiscoveryGame()"></i>
  <a href="reels.html"><i id="discoveryReel" class="fas fa-play discoveryReel"></i></a>
  
  <div id="settingsPanel" class="settings-panel">
    <h3>Settings & Filters</h3>
    <div class="filter-group">
      <label for="searchBox">Search Movies</label>
      <input type="text" id="searchBox" placeholder="Search by title...">
    </div>
    
    <div class="filter-group">
      <label for="genreFilter">Filter by Genre</label>
      <select id="genreFilter"></select>
    </div>
    
    <div class="filter-group">
      <label for="sortOptions">Sort By</label>
      <select id="sortOptions">
          <option value="likes">Most Liked</option>
          <option value="title">A-Z Title</option>
          <option value="date">Date Added</option>
      </select>
    </div>
    
    <div class="filter-group">
      <label>Display Options</label>
      <button id="myMoviesButton">My Movies</button>
      <button id="watchedMoviesButton">Show Watched</button>
      <button id="wannaWatchMoviesButton">Wanna Watch</button>
      <button id="resetFiltersButton" onclick="resetFilters()">Reset Filters</button>
    </div>
    
    <div class="activity-feed">
      <h3>Recent Activity</h3>
      <div id="activityList"></div>
    </div>
  </div>

  <div id="editNameModal" class="modal">
    <div class="modal-content">
      <i class="fas fa-times modal-close-btn" onclick="closeModal('editNameModal')"></i>
      <h3>Edit Movie Name</h3>
      <input type="text" id="editNameInput">
      <div class="modal-buttons">
        <button onclick="confirmNameEdit()">Save</button>
        <button onclick="closeModal('editNameModal')">Cancel</button>
      </div>
    </div>
  </div>

  <div id="editPosterModal" class="modal">
    <div class="modal-content">
      <i class="fas fa-times modal-close-btn" onclick="closeModal('editPosterModal')"></i>
      <h3>Edit Poster</h3>
      <div class="poster-edit-options">
          <input type="text" id="editPosterUrlInput" placeholder="Paste image URL here">
          <label>or</label>
          <input type="file" id="editPosterFileInput" accept="image/*" onchange="previewPoster(event)">
          <img id="posterPreview" class="poster-preview" src="">
      </div>
      <div class="modal-buttons">
        <button onclick="confirmPosterEdit()">Save</button>
        <button onclick="closeModal('editPosterModal')">Cancel</button>
      </div>
    </div>
  </div>
  
  <div id="confirmModal" class="modal">
    <div class="modal-content">
      <i class="fas fa-times modal-close-btn" onclick="closeModal('confirmModal')"></i>
        <h3>Delete Movie?</h3>
        <p>Are you sure you want to delete this movie?</p>
        <div class="modal-buttons">
            <button id="confirmDeleteButton" onclick="">Yes, Delete</button>
            <button onclick="closeModal('confirmModal')">Cancel</button>
        </div>
    </div>
  </div>

  <div id="movieDetailsModal" class="modal">
    <div class="modal-content movie-detail-modal-content">
      <i class="fas fa-times modal-close-btn" onclick="closeModal('movieDetailsModal')"></i>
      <div class="detail-header">
        <img id="detailPoster" class="detail-poster" src="" alt="Movie Poster">
        <div class="detail-info">
          <h3 id="detailTitle"></h3>
          <p id="detailDescription"></p>
          <span id="detailGenre" class="detail-genre"></span>
        </div>
      </div>
      <div id="castSection" class="cast-section" style="display: none;">
        <h4>Cast</h4>
        <div id="castList" class="cast-list"></div>
      </div>
    </div>
  </div>
  
  <div id="discoveryGameModal" class="modal">
    <div class="modal-content discovery-game-content">
      <i class="fas fa-times modal-close-btn" onclick="closeDiscoveryGame()"></i>
      <img id="gameMoviePoster" src="https://images.unsplash.com/photo-1596727147705-61849a613f17?q=80&w=1780" alt="Random movie poster">
      <span id="gameMovieTitle" class="movie-title">Finding Movies...</span>
      <div class="game-buttons">
          <button class="watched-btn" onclick="handleGameAction('watched')"><i class="fas fa-check-circle"></i> Watched</button>
          <button class="wanna-watch-btn" onclick="handleGameAction('wanna-watch')"><i class="fas fa-bookmark"></i> Wanna Watch</button>
          <button class="not-interested-btn" onclick="handleGameAction('not-interested')"><i class="fas fa-times-circle"></i> Not Interested</button>
      </div>
    </div>
  </div>
  
  <div id="loginModal" class="modal visible">
      <div class="modal-content">
          <h3>Welcome to Movie Streak!</h3>
          <p>Enter a name and password to get started. If the name exists, you'll be logged in.</p>
          <div class="login-content">
              <div class="profile-pic-upload">
                  <img id="profilePicPreview" class="profile-pic-preview" src="https://ui-avatars.com/api/?name=User&background=4a90e2&color=fff&size=128&bold=true&font-size=0.5" alt="Profile Picture">
                  <label for="profilePicFile" class="upload-btn">
                      <i class="fas fa-camera"></i> Upload Profile Pic
                  </label>
                  <input type="file" id="profilePicFile" accept="image/*" onchange="previewProfilePic(event)">
              </div>
              <input type="text" id="loginNameInput" placeholder="Enter a name" required>
              <div class="password-wrapper">
                  <input type="password" id="loginPasswordInput" placeholder="Enter a password" required>
                  <i id="passwordToggle" class="fas fa-eye password-toggle"></i>
              </div>
              <button onclick="handleLoginButtonClick()">Continue</button>
          </div>
      </div>
  </div>

  <div id="profileModal" class="modal">
      <div class="modal-content profile-modal-content">
          <i class="fas fa-times modal-close-btn" onclick="closeModal('profileModal')"></i>
          <img id="profilePicModal" class="profile-pic" src="">
          <h3 id="profileNameModal"></h3>
          <p class="streak-display"><i id="streakFireIcon" class="fas fa-fire"></i> Streak: <span id="streakCountModal">0</span> days</p>
          
          <button class="wanna-watch-btn" onclick="closeModal('profileModal'); startDiscoveryGame();">Start Discovery Game</button>
          <button id="discoveryBoostBtn" class="discovery-boost-btn" style="display: none;" onclick="startDiscoveryGame(5)">Discovery Boost</button>

          <div class="milestones">
            <h4>Milestones</h4>
            <div id="milestonesGrid" class="milestones-grid">
                <div id="badge-7" class="milestone-badge">
                    <div class="badge-icon"><i class="fas fa-star"></i></div>
                    <span>7-Day Streak</span>
                </div>
                <div id="badge-30" class="milestone-badge">
                    <div class="badge-icon"><i class="fas fa-medal"></i></div>
                    <span>30-Day Streak</span>
                </div>
                <div id="badge-100" class="milestone-badge">
                    <div class="badge-icon"><i class="fas fa-crown"></i></div>
                    <span>100-Day Streak</span>
                </div>
            </div>
          </div>
          
          <button onclick="logout()">Log Out</button>
      </div>
  </div>

  <div id="toast" class="toast"></div>

  <div class="share-popup">
    <button id="share-button">Share App</button>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-messaging-compat.js"></script>

</body>
</html>
